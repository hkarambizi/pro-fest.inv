<!DOCTYPE html>
<html>
  <head>
    <title>Fifo</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application' %>

    <style>

        html {
              background: no-repeat center center fixed;
              -webkit-background-size: cover;
              -moz-background-size: cover;
             -o-background-size: cover;
              background-size: cover;
              }

    #map {

    /* Set up proportionate scaling */
    width: 90vw;
    height: 90vh;
    /* Set up positioning */
    z-index: -1
  }

        </style>

  </head>

  <body>


    <body>
      <div class="row">
        <div class="col s3 columnbgrnd" style="height: 100vh;">
          <img src="http://imageshack.com/a/img922/3479/R0MMsN.png" style="width:128px;height:128px">

          <ul>
          <% if user_signed_in? %>
            <li class="waves-effect waves-light btn sideLinks">
              <%= link_to 'Home', root_path %>
            </li>
            <li class="waves-effect waves-light btn sideLinks Edit">
              <%= link_to 'Edit account', edit_user_registration_path, target: '_self' %>
            </li>
            <li>
              <a class="waves-effect waves-light btn sideLinks orders" href="#modal1">Orders</a>
            </li>
          <li class="waves-effect waves-light btn sideLinks signout">
            <%= link_to 'Sign out', destroy_user_session_path, method: 'delete', target: '_self' %>
          </li>
          <li>
          <a class="waves-effect waves-light btn sideLinks locations" href="#locations-modal">Locations</a>
          </li>
          <li class="waves-effect waves-light btn sideLinks Events">
            <%= link_to 'Events', client_events_path(client_id: current_user.client_id), id: 'modal-trigger' %>
          </li>
          <% end %>
      

        </ul>
          <section id="footer">
            <ul class="icons">
              <li>
                <a href="https://github.com/hkarambizi" class="fa-github-square">
                  <span class="label">Harry Karambizi
                  </span>
                </a>
              </li>

              <li>
                <a href="https://github.com/mtorres23" class="fa-github-square">
                  <span class="label">Michael Torres</span>
                </a>
              </li>
              <li>
                <a href="https://github.com/ddmilo" class="fa-github-square">
                  <span class="label">Dan Milo</span>
                </a>
              </li>
            </ul>

            <p class="copyright">&copy; FiFo 2017</p>
          </section>
      </div>

      <div class="col s9" style="height: 100vh;">
        <p class="notice"><%= notice %></p>
        <p class="alert"><%= alert %></p>

        <div id="map"></div>

     

    <!-- Modal Trigger -->

    <!-- Modal Structure -->
    <div id="modal1" class="modal bottom-sheet">
      <div class="modal-header">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Modal Header</a>
      </div>
      <div class="modal-content">
            <%= yield %>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Submit</a>
      </div>
    </div>




    <div id="modal2" class="modal bottom-sheet">
      <div class="modal-header">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Modal Header</a>
      </div>
      <div class="modal-content">
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Submit</a>
      </div>
    </div>

   </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/core.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>

    <script>
        $(document).ready(function(){
    // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
        $('.modal').modal();
      
        $('#modal1').modal('open');
  
        
      });
    </script>

    </body>


    <% if notice %>
        <p class="alert alert-success"><%= notice %></p>
    <% end %>
    <% if alert %>
        <p class="alert alert-danger"><%= alert %></p>
    <% end %>

<script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
<script>
$('.datepicker').pickadate({
selectMonths: true, // Creates a dropdown to control month
selectYears: 15 // Creates a dropdown of 15 years to control year
});
</script>
        <script>
          function initMap() {
            <% if @location %>
            var target = {lat: <%= @location.latitude %>, lng: <%= @location.longitude %>};
            <% elsif @event %>
            var target = {lat: <%= @event.latitude %>, lng: <%= @event.longitude %>};
            <% else %>
            var target = {<%= @client.latitude %>, lng: <%= @client.longitude %>}
            <% end %>

            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 20,
              center: target
            });
            var marker = new google.maps.Marker({
              position: target,
              map: map
            });
          };
        </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDNVvXDU4Aqwox4qm0Og93eajvCYYrpFCQ&callback=initMap"
                                           async defer></script>
  </body>
</html>
